/* src/app/globals.css
   ------------------------------------------------------------
   Pipeline: Tailwind v4 (single import)
   ------------------------------------------------------------ */
@import "tailwindcss";

/* ========== Tokens ======================================================= */
:root{
  /* fonts */
  --mono: Menlo, Monaco, Consolas, "SFMono-Regular", "Liberation Mono", "Courier New", ui-monospace, monospace;

  /* app shell (dark by default) */
  --bg:#000; --panel:#1e1e1e; --text:#fff; --muted:#b3b3b3;

  /* accents */
  --accent:#1991ff; --focus-orange:#f7a02d;
  --hover-green:#0bf05f; --seafoam:#2ee6b8; --purple:#a855f7;

  /* code tokens */
  --comment:var(--seafoam); --string:#ce9178; --keyword:#9cdcfe;
  --var:#dcdcaa; --punct:#ffffff; --op:#ffffff;

  /* radii */
  --radius-xl:14px;

  /* shop palette */
  --shop-offwhite:#F7F7F2;

  /* header control height used for vertical alignment (does NOT force width) */
  --header-ctrl:56px;
}

/* Native UI matches the theme */
:root[data-theme="day"]  { color-scheme: light; }
:root[data-theme="night"]{ color-scheme: dark;  }

/* ========== Base ========================================================= */
html,body{
  margin:0; padding:0;
  background:var(--bg); color:var(--text);
  font-family:var(--mono);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Motion safety */
@media (prefers-reduced-motion: reduce){
  * {
    animation-duration:0.001ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.001ms !important;
    scroll-behavior:auto !important;
  }
}

/* ========== Layout helpers ============================================== */
.page-center{ min-height:100dvh; display:flex; align-items:center; justify-content:center; gap:18px; padding:2rem; }
.row-nowrap{ display:flex; align-items:center; gap:14px; flex-wrap:nowrap; }

/* ========== Cards / Bubble ============================================== */
.vscode-card{
  background:var(--panel);
  border:2px solid var(--accent);
  border-radius:var(--radius-xl);
  box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12);
  transition:transform .28s ease, box-shadow .28s ease, opacity .28s ease;
}
.card-ultra-tight{ padding:6px 8px; }
.login-card{ position:relative; display:inline-flex; flex-direction:column; gap:2px; width:fit-content; max-width:92vw; }

.bubble-button{ cursor:pointer; }
.bubble-button:hover{
  box-shadow:0 0 0 1px rgba(25,145,255,.25), 0 0 24px rgba(25,145,255,.22), 0 0 50px rgba(25,145,255,.25);
}
@keyframes bubblePulseBlue{
  0%{ box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12); }
  35%{ box-shadow:0 0 0 1px rgba(25,145,255,.25), 0 0 28px rgba(25,145,255,.28), 0 0 56px rgba(25,145,255,.32); }
  100%{ box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12); }
}
.bubble-glow-blue{ animation:bubblePulseBlue .85s ease-out; }
.lameboy-glow{ color:var(--seafoam); font-weight:900; text-shadow:0 0 10px rgba(46,230,184,.50), 0 0 20px rgba(46,230,184,.35); }

/* ========== Links / Florida ============================================= */
.ghost-btn{ background:transparent; border:0; margin:0; padding:0; color:var(--muted); font:inherit; cursor:pointer; white-space:nowrap; transition:color .15s ease, text-shadow .15s ease; }
.florida-inline{ display:block; margin-top:8px; }
.florida-link{ color:var(--muted); }
.florida-link:hover,.florida-link.is-hot{
  color:#ffeb3b; font-weight:900;
  text-shadow:0 0 8px rgba(255,235,59,.60), 0 0 18px rgba(255,235,59,.35);
}

/* ========== Transitions / Slides ======================================== */
.card-slide-left  { animation:slideLeftSmooth  .5s cubic-bezier(.22,.61,.21,.99); }
.card-slide-right { animation:slideRightSmooth .5s cubic-bezier(.22,.61,.21,.99); }
.slide-in-left    { animation:slideLeftSmooth  .45s cubic-bezier(.22,.61,.21,.99); }
.slide-in-right   { animation:slideRightSmooth .45s cubic-bezier(.22,.61,.21,.99); }
@keyframes slideLeftSmooth  { from{ transform:translateX(28px); opacity:.01;} to{ transform:translateX(0); opacity:1;} }
@keyframes slideRightSmooth { from{ transform:translateX(-28px); opacity:.01;} to{ transform:translateX(0); opacity:1;} }

/* ========== Code look ==================================================== */
.code-comment{ color:var(--comment); } .code-string{ color:var(--string); }
.code-keyword{ color:var(--keyword); } .code-var{ color:var(--var); }
.code-op{ color:var(--op); } .code-punc{ color:var(--punct); }
.code-placeholder{ color:#555454; }
.code-banned,.code-fail{ color:#f20e0e; font-weight:800; text-shadow:0 0 6px rgba(242,14,14,.55), 0 0 14px rgba(242,14,14,.35); }
.code-success{ color:var(--hover-green); font-weight:800; text-shadow:0 0 6px rgba(11,240,95,.55), 0 0 14px rgba(11,240,95,.35); }

.code-line{ display:flex; align-items:baseline; gap:4px; line-height:1.35; font-size:.95rem; flex-wrap:wrap; }
.code-input{ background:transparent; border:none; outline:none; color:var(--purple); caret-color:var(--purple); font:inherit; padding:0; margin:0; }
.caretwrap{ position:relative; display:inline-flex; align-items:baseline; min-width:8px; }
.measurer{ position:absolute; visibility:hidden; pointer-events:none; white-space:pre; font:inherit; line-height:1.35; }
.purple-caret{ position:absolute; left:0; top:0; z-index:2; line-height:1; }
.purple-caret::after{ content:"▮"; color:var(--purple); animation:blink 1.1s steps(2,start) infinite; }
@keyframes blink{ to{ visibility:hidden; } }

/* ========== 3D Logo canvas ============================================== */
.logo-3d{ position:fixed; inset:0; z-index:8; pointer-events:none; }
@media (prefers-reduced-motion: reduce){ .logo-3d{ display:none; } }
.login-card pre.code-tight{ letter-spacing:0; word-spacing:-0.14ch; }

/* ========== Chakra Cascade (banned) ===================================== */
.chakra-overlay{ position:fixed; inset:0; z-index:60; display:grid; grid-template-columns:repeat(7,1fr); pointer-events:none; direction:rtl; }
.chakra-band{ position:relative; opacity:0; transform:translateX(2%); animation:chakraBlink 1.2s ease-out forwards; }
.chakra-band::before{ content:""; position:absolute; inset:-10px; background:var(--c); filter:blur(22px); opacity:.55; pointer-events:none; }
@keyframes chakraBlink{ 0%{opacity:0;transform:translateX(2%);} 18%{opacity:1;transform:translateX(0);} 80%{opacity:1;} 100%{opacity:0;} }
.band-1{animation-delay:0s} .band-2{animation-delay:.18s} .band-3{animation-delay:.36s}
.band-4{animation-delay:.54s} .band-5{animation-delay:.72s} .band-6{animation-delay:.90s} .band-7{animation-delay:1.08s}
.chakra-root{--c:#ff0808;background:#FF0000}
.chakra-sacral{--c:#ff8b07;background:#FF7F00}
.chakra-plexus{--c:#ffff4b;background:#FFFF00}
.chakra-heart{--c:#22ff22;background:#00FF00}
.chakra-throat{--c:#164bfb;background:#0000FF}
.chakra-thirdeye{--c:#b300ff;background:#4B0082}
.chakra-crown{--c:#faf5ff;background:#ff00c8}

/* ========== Shop grid & hero ============================================ */
:root[data-mode="shop"][data-theme="day"]  { --bg:var(--shop-offwhite); --panel:var(--shop-offwhite); --text:#111; }
:root[data-mode="shop"][data-theme="night"]{ --bg:#000;               --panel:#000;               --text:#fff; }

:root[data-mode="shop"]{
  background:var(--bg);
  color:var(--text);
  transition:background-color .35s ease, color .35s ease;
}

/* Header transparent & centered controls */
:root[data-mode="shop"] header[role="banner"]{
  background:transparent !important;
  box-shadow:none !important;
  border:0 !important;
}
:root[data-mode="shop"] header[role="banner"] > *{ align-self:center !important; }

/* Nuke stray whites so wrapper color shows */
:root[data-mode="shop"] .shop-page,
:root[data-mode="shop"] .shop-wrap,
:root[data-mode="shop"] .shop-grid,
:root[data-mode="shop"] .product-box,
:root[data-mode="shop"] .product-hero-overlay,
:root[data-mode="shop"] .product-hero,
:root[data-mode="shop"] .product-img,
:root[data-mode="shop"] [class*="page"],
:root[data-mode="shop"] [class*="container"]{
  background:transparent !important;
  color:inherit;
}

/* Product titles follow theme text */
:root[data-mode="shop"] .product-meta{ color:var(--text); }

/* Hide global canvas behind shop */
html:has([data-shop-root]) .logo-3d{ display:none !important; }

/* Smoother grid */
html:has([data-shop-root]) .shop-grid,
html:has([data-shop-root]) .product-box,
html:has([data-shop-root]) .product-img{
  will-change:transform, opacity;
  transform:translateZ(0);
  backface-visibility:hidden;
}

/* ===== NOTE: removed the old header size overrides that stretched controls =====
   We DO NOT force width/height on the orb or toggle here. Their React props own size.
   The only place we use --header-ctrl now is to vertically align the cart button.
*/

/* ========== Cart (Birkin PNG) =========================================== */
.cart-fab{
  position:relative;
  display:inline-flex; align-items:center; justify-content:center;
  width:48px; height:48px;
  padding:0; border:0; background:transparent; cursor:pointer;
  transform:translateZ(0); z-index:20;
}
.cart-fab.bump{ animation:cart-bump 350ms ease; }
@keyframes cart-bump{
  0%{transform:translateZ(0) scale(1)}
  30%{transform:translateZ(0) scale(1.08)}
  100%{transform:translateZ(0) scale(1)}
}
.cart-img-wrap{ display:inline-block; width:100%; height:100%; aspect-ratio:1/1; line-height:0; }
.cart-img-wrap img{ width:100%; height:100%; object-fit:contain; pointer-events:none; }

/* Badge */
.cart-badge{
  position:absolute; top:-6px; right:-6px;
  min-width:18px; height:18px; padding:0 5px;
  border-radius:999px; font-size:11px; line-height:18px; text-align:center;
  color:#000; background:var(--hover-green, #0bf05f);
  box-shadow:0 0 0 1px rgba(0,0,0,.25);
}

/* Cart alignment in header (height only; no width forcing) */
:root[data-mode="shop"] header[role="banner"] .cart-fab{
  position:static !important; width:auto; height:var(--header-ctrl); padding:6px 8px;
  background:transparent !important; border:none !important; box-shadow:none !important;
  display:inline-grid; place-items:center; border-radius:0 !important;
}
:root[data-mode="shop"][data-theme="day"]   header[role="banner"] .cart-fab{ color:#111; }
:root[data-mode="shop"][data-theme="night"] header[role="banner"] .cart-fab{ color:#fff; }
:root[data-mode="shop"] header[role="banner"] .cart-fab:hover{ transform:translateY(-1px); }

/* ========== Grid & tiles ================================================= */
.shop-page{ background:#fff; color:#111; min-height:100dvh; }
.shop-wrap{ padding:86px 24px 24px; }
.shop-grid{
  --tile:clamp(140px,17vw,200px);
  --gap:28px;
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(var(--tile),1fr));
  gap:var(--gap);
}
@media (min-width:1280px){ .shop-grid{ --tile:220px; --gap:32px; } }
@media (max-width:640px){  .shop-grid{ --tile:150px; --gap:20px; } }

.product-tile{ display:block; color:inherit; text-decoration:none; }
.product-box{ aspect-ratio:1/1; display:flex; align-items:center; justify-content:center; overflow:hidden; background:transparent; border:none; }
.product-img{ width:88%; height:88%; object-fit:contain; }
.product-meta{ padding:10px 2px 0; letter-spacing:.02em; font-weight:800; text-align:center; font-size:clamp(12px,1.7vw,18px); line-height:1.05; }

/* Product overlay */
.product-hero-overlay{ position:fixed; inset:0; z-index:90; background:#fff; color:#111; display:flex; align-items:center; justify-content:center; padding:20px; }
.product-hero{ width:min(92vw,1000px); max-height:86vh; display:flex; flex-direction:column; align-items:center; gap:14px; position:relative; }
.product-hero-img{ width:100%; max-height:70vh; object-fit:contain; }
.product-hero-title{ font-weight:800; font-size:clamp(14px,2vw,20px); text-align:center; }
.product-hero-price{ font-weight:700; font-size:clamp(13px,1.8vw,18px); text-align:center; opacity:.9; }
.product-hero-close{
  position:fixed; left:24px; top:24px; z-index:95; width:42px; height:42px; border-radius:12px;
  display:grid; place-items:center; cursor:pointer; border:1px solid rgba(0,0,0,.12);
  background:rgba(0,0,0,.04); color:#111; font-weight:900; font-size:22px;
  transition:transform .12s ease, background .2s, border-color .2s;
}
.product-hero-close:hover{ transform:translateY(-1px); background:rgba(0,0,0,.06); border-color:rgba(0,0,0,.2); }

/* Cascade tiles pop */
.lb-tile{ filter:saturate(1.12) brightness(1.02); }
.lb-tile + .lb-tile{ box-shadow:-1px 0 0 rgba(255,255,255,.06) inset; }

/* ========== Day ↔ Night toggle skin (decor) ============================== */
.lb-switch{
  position:relative; display:inline-flex; align-items:center;
  padding:0; margin:0; border:1px solid rgba(0,0,0,.14);
  background:#fff; cursor:pointer; isolation:isolate;
  box-shadow:0 4px 18px rgba(0,0,0,.10), inset 0 0 0 1px rgba(255,255,255,.6);
  transition:border-color .25s ease, background .25s ease, box-shadow .25s ease;
  -webkit-tap-highlight-color:transparent;
}
.lb-switch:focus-visible{ outline:2px solid #4aa5ff; outline-offset:3px; }

.lb-switch-bg{
  position:absolute; inset:0; border-radius:999px; overflow:hidden;
  background:linear-gradient(180deg, #bfe7ff 0%, #dff4ff 60%, #ffffff 100%);
  transition:transform .45s ease, opacity .45s ease, filter .45s ease;
}
[data-theme="night"] .lb-switch .lb-switch-bg{
  background:radial-gradient(120% 120% at 30% 30%, #1a1a2b 0%, #0b0b14 55%, #000 100%);
}

.lb-switch-decor{ position:absolute; inset:0; border-radius:999px; overflow:hidden; pointer-events:none; }
.lb-switch-decor .cloud{
  position:absolute; background:#fff; filter:drop-shadow(0 3px 6px rgba(0,0,0,.08));
  border-radius:999px; opacity:.95; transition:transform .45s ease, opacity .45s ease;
}
.lb-switch-decor .cloud::before,.lb-switch-decor .cloud::after{ content:""; position:absolute; background:#fff; border-radius:999px; }
.lb-switch-decor .c1{ left:10%; top:22%; width:32%; height:36%; }
.lb-switch-decor .c1::before{ left:-20%; top:18%; width:45%; height:55%; }
.lb-switch-decor .c1::after { right:-18%; top:30%; width:38%; height:48%; }
.lb-switch-decor .c2{ left:54%; top:52%; width:26%; height:28%; opacity:.9; }
.lb-switch-decor .c2::before{ left:-24%; top:8%; width:40%; height:58%; }
.lb-switch-decor .c2::after { right:-18%; top:20%; width:34%; height:44%; }
.lb-switch-decor .c3{ left:36%; top:12%; width:18%; height:22%; opacity:.92; }
.lb-switch-decor .c3::before{ left:-28%; top:10%; width:32%; height:44%; }
.lb-switch-decor .c3::after { right:-20%; top:26%; width:28%; height:38%; }

.lb-switch-decor .stars{ position:absolute; inset:0; opacity:0; transition:opacity .45s ease; }
.lb-switch-decor .stars .s{
  position:absolute; width:2px; height:2px; background:#fff; border-radius:2px;
  box-shadow:0 0 8px rgba(255,255,255,.85);
  animation:twinkle 1.8s ease-in-out infinite;
}
@keyframes twinkle{ 0%,100%{ transform:scale(.7); opacity:.7; } 50%{ transform:scale(1.15); opacity:1; } }
.lb-switch-decor .stars .s1{ left:18%; top:22%; animation-delay:.0s }
.s2{ left:30%; top:64%; animation-delay:.25s } .s3{ left:46%; top:36%; animation-delay:.4s }
.s4{ left:60%; top:18%; animation-delay:.65s } .s5{ left:72%; top:54%; animation-delay:.9s }
.s6{ left:82%; top:30%; animation-delay:1.1s } .s7{ left:12%; top:58%; animation-delay:1.35s }
.s8{ left:40%; top:72%; animation-delay:1.5s } .s9{ left:52%; top:12%; animation-delay:1.7s }
.s10{ left:66%; top:40%; animation-delay:1.85s } .s11{ left:78%; top:68%; animation-delay:2.0s }
.s12{ left:24%; top:34%; animation-delay:2.15s }

/* ========== Header orb / click-through ================================== */
[data-orb="density"]{
  padding:0 !important; margin:0 !important; border:0 !important;
  background:transparent !important; line-height:0 !important;
}
[data-orb="density"] canvas{ display:block; pointer-events:auto; }

/* --- Banned page layout fixes + button skins --- */
.login-stack{ display:flex; flex-direction:column; align-items:center; gap:10px; }
.orb-row{ margin-bottom:-28px; display:grid; place-items:center; contain:layout paint style; isolation:isolate; z-index:10; }
.code-row{ display:flex; align-items:baseline; gap:6px; line-height:1.35; font-size:.95rem; }
.neon-violet{ color:var(--purple); text-shadow:0 0 10px rgba(168,85,247,.35); }
.code-input-violet{ color:var(--purple); caret-color:var(--purple); }
.btn-yellow{ border-color: var(--focus-orange); background: rgba(247,160,45,.12); }
.btn-yellow:hover{ background: rgba(247,160,45,.16); border-color: var(--focus-orange); }
.btn-red{ border-color:#ff4d4f; background: rgba(255,77,79,.12); }
.btn-red:hover{ background: rgba(255,77,79,.18); border-color:#ff4d4f; }
.btn-activated{ transform: translateY(1px); box-shadow: inset 0 0 0 1px currentColor; }

.banned-trigger{ cursor:pointer; text-decoration:none; }
.banned-trigger:hover,
.banned-trigger:focus-visible,
.banned-trigger:active{
  text-decoration-line: line-through;
  text-decoration-thickness: 2px;
  text-decoration-color: rgba(242,14,14,.9);
  text-shadow: 0 0 6px rgba(242,14,14,.55), 0 0 14px rgba(242,14,14,.35);
}

.code-link{ cursor: pointer; text-decoration: underline dotted rgba(255,255,255,.45); }
.code-link:hover{ text-decoration-style: solid; text-decoration-color: rgba(255,255,255,.85); }
.login-card .lb-white{
  font-weight:900;
  text-shadow:
    0 0 8px rgba(255,255,255,.9),
    0 0 18px rgba(255,255,255,.6),
    0 0 36px rgba(255,255,255,.35);
}

/* Seafoam comment glow */
.glow-seafoam, .lb-seafoam.code-comment{
  text-shadow: 0 0 10px rgba(46,230,184,.50), 0 0 20px rgba(46,230,184,.35);
}

/* Heavier token weights */
.code-keyword,.code-var,.code-string,.code-comment{ font-weight:800; }
:root { --header-ctrl: 44px; } /* adjust here to taste */

:root[data-mode="shop"] header[role="banner"] [data-orb="density"],
:root[data-mode="shop"] header[role="banner"] [data-orb="density"] canvas {
  width: var(--header-ctrl) !important;
  height: var(--header-ctrl) !important;
  max-width: var(--header-ctrl) !important;
  max-height: var(--header-ctrl) !important;
}

:root[data-mode="shop"] header[role="banner"] #lb-daynight {
  height: var(--header-ctrl) !important;
  display: grid; place-items: center;
  padding: 0 !important; margin: 0 !important; line-height: 0 !important;
}
