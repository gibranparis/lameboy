@import "tailwindcss";

/* ========== Tokens ======================================================= */
:root{
  /* fonts */
  --mono: Menlo, Monaco, Consolas, "SFMono-Regular", "Liberation Mono", "Courier New", ui-monospace, monospace;

  /* app shell (dark by default) */
  --bg:#000; --panel:#1e1e1e; --text:#fff; --muted:#b3b3b3;

  /* accents */
  --accent:#1991ff; --focus-orange:#f7a02d;
  --hover-green:#0bf05f; --seafoam:#2ee6b8; --purple:#a855f7;

  /* code tokens */
  --comment:var(--seafoam); --string:#ce9178; --keyword:#9cdcfe;
  --var:#dcdcaa; --punct:#ffffff; --op:#ffffff;

  /* radii */
  --radius-xl:14px;

  /* shop palette */
  --shop-offwhite:#F7F7F2;

  /* Header control square (orb/toggle/cart) */
  --header-ctrl:56px;

  /* ===== Grid zoom (core): number of columns (1..5) ===== */
  --grid-cols: 5; /* default to 5 per line */
}

/* Native UI matches the theme */
:root[data-theme="day"]  { color-scheme: light; }
:root[data-theme="night"]{ color-scheme: dark;  }

/* ========== Base ========================================================= */
html,body{
  margin:0; padding:0;
  background:var(--bg); color:var(--text);
  font-family:var(--mono);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Motion safety */
@media (prefers-reduced-motion: reduce){
  * {
    animation-duration:0.001ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.001ms !important;
    scroll-behavior:auto !important;
  }
}

/* ========== Layout helpers ============================================== */
.page-center{ min-height:100dvh; display:flex; align-items:center; justify-content:center; gap:18px; padding:2rem; }
.row-nowrap{ display:flex; align-items:center; gap:14px; flex-wrap:nowrap; }

/* ========== Cards / Bubble ============================================== */
.vscode-card{
  background:var(--panel);
  border:2px solid var(--accent);
  border-radius:var(--radius-xl);
  box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12);
  transition:transform .28s ease, box-shadow .28s ease, opacity .28s ease;
}
.card-ultra-tight{ padding:6px 8px; }
.login-card{ position:relative; display:inline-flex; flex-direction:column; gap:2px; width:fit-content; max-width:92vw; }

.bubble-button{ cursor:pointer; }
.bubble-button:hover{
  box-shadow:0 0 0 1px rgba(25,145,255,.25), 0 0 24px rgba(25,145,255,.22), 0 0 50px rgba(25,145,255,.25);
}
@keyframes bubblePulseBlue{
  0%{ box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12); }
  35%{ box-shadow:0 0 0 1px rgba(25,145,255,.25), 0 0 28px rgba(25,145,255,.28), 0 0 56px rgba(25,145,255,.32); }
  100%{ box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12); }
}
.bubble-glow-blue{ animation:bubblePulseBlue .85s ease-out; }
.lameboy-glow{ color:var(--seafoam); font-weight:900; text-shadow:0 0 10px rgba(46,230,184,.50), 0 0 20px rgba(46,230,184,.35); }

/* ========== Links / Florida ============================================= */
.ghost-btn{ background:transparent; border:0; margin:0; padding:0; color:var(--muted); font:inherit; cursor:pointer; white-space:nowrap; transition:color .15s ease, text-shadow .15s ease; }
.florida-inline{ display:block; margin-top:8px; }
.florida-link{ color:var(--muted); }
.florida-link:hover,.florida-link.is-hot{
  color:#ffeb3b; font-weight:900;
  text-shadow:0 0 8px rgba(255,235,59,.60), 0 0 18px rgba(255,235,59,.35);
}

/* ========== Transitions / Slides ======================================== */
.card-slide-left  { animation:slideLeftSmooth  .5s cubic-bezier(.22,.61,.21,.99); }
.card-slide-right { animation:slideRightSmooth .5s cubic-bezier(.22,.61,.21,.99); }
.slide-in-left    { animation:slideLeftSmooth  .45s cubic-bezier(.22,.61,.21,.99); }
.slide-in-right   { animation:slideRightSmooth .45s cubic-bezier(.22,.61,.21,.99); }
@keyframes slideLeftSmooth  { from{ transform:translateX(28px); opacity:.01;} to{ transform:translateX(0); opacity:1;} }
@keyframes slideRightSmooth { from{ transform:translateX(-28px); opacity:.01;} to{ transform:translateX(0); opacity:1;} }

/* ========== Code look ==================================================== */
.code-comment{ color:var(--comment); } .code-string{ color:var(--string); }
.code-keyword{ color:var(--keyword); } .code-var{ color:var(--var); }
.code-op{ color:var(--op); } .code-punc{ color:var(--punct); }
.code-placeholder{ color:#555454; }
.code-banned,.code-fail{ color:#f20e0e; font-weight:800; text-shadow:0 0 6px rgba(242,14,14,.55), 0 0 14px rgba(242,14,14,.35); }
.code-success{ color:var(--hover-green); font-weight:800; text-shadow:0 0 6px rgba(11,240,95,.55), 0 0 14px rgba(11,240,95,.35); }

/* ========== 3D Logo canvas ============================================== */
.logo-3d{ position:fixed; inset:0; z-index:8; pointer-events:none; }
@media (prefers-reduced-motion: reduce){ .logo-3d{ display:none; } }
.login-card pre.code-tight{ letter-spacing:0; word-spacing:-0.14ch; }

/* ========== Chakra Cascade (banned) ===================================== */
.chakra-overlay{ position:fixed; inset:0; z-index:60; display:grid; grid-template-columns:repeat(7,1fr); pointer-events:none; direction:rtl; }
.chakra-band{ position:relative; opacity:0; transform:translateX(2%); animation:chakraBlink 1.2s ease-out forwards; }
.chakra-band::before{ content:""; position:absolute; inset:-10px; background:var(--c); filter:blur(22px); opacity:.55; pointer-events:none; }
@keyframes chakraBlink{ 0%{opacity:0;transform:translateX(2%);} 18%{opacity:1;transform:translateX(0);} 80%{opacity:1;} 100%{opacity:0;} }
.band-1{animation-delay:0s} .band-2{animation-delay:.18s} .band-3{animation-delay:.36s}
.band-4{animation-delay:.54s} .band-5{animation-delay:.72s} .band-6{animation-delay:.90s} .band-7{animation-delay:1.08s}
.chakra-root{--c:#ff0808;background:#FF0000}
.chakra-sacral{--c:#ff8b07;background:#FF7F00}
.chakra-plexus{--c:#ffff4b;background:#FFFF00}
.chakra-heart{--c:#22ff22;background:#00FF00}
.chakra-throat{--c:#164bfb;background:#0000FF}
.chakra-thirdeye{--c:#b300ff;background:#4B0082}
.chakra-crown{--c:#faf5ff;background:#ff00c8}

/* ========== Shop grid & hero ============================================ */
:root[data-mode="shop"][data-theme="day"]  { --bg:var(--shop-offwhite); --panel:var(--shop-offwhite); --text:#111; }
:root[data-mode="shop"][data-theme="night"]{ --bg:#000;               --panel:#000;               --text:#fff; }

:root[data-mode="shop"]{
  background:var(--bg);
  color:var(--text);
  transition:background-color .35s ease, color .35s ease;
}

/* Header transparent & centered controls */
:root[data-mode="shop"] header[role="banner"]{
  background:transparent !important;
  box-shadow:none !important;
  border:0 !important;
  padding:0 16px; /* give cart breathing room from right edge */
}
:root[data-mode="shop"] header[role="banner"] > *{ align-self:center !important; }

/* Nuke stray whites so wrapper color shows */
:root[data-mode="shop"] .shop-page,
:root[data-mode="shop"] .shop-wrap,
:root[data-mode="shop"] .shop-grid,
:root[data-mode="shop"] .product-box,
:root[data-mode="shop"] .product-hero-overlay,
:root[data-mode="shop"] .product-hero,
:root[data-mode="shop"] .product-img,
:root[data-mode="shop"] [class*="page"],
:root[data-mode="shop"] [class*="container"]{
  background:transparent !important;
  color:inherit;
}

/* Product titles follow theme text */
:root[data-mode="shop"] .product-meta{ color:var(--text); }

/* Hide global canvas behind shop */
html:has([data-shop-root]) .logo-3d{ display:none !important; }

/* Smoother grid */
html:has([data-shop-root]) .shop-grid,
html:has([data-shop-root]) .product-box,
html:has([data-shop-root]) .product-img{
  will-change:transform, opacity;
  transform:translateZ(0);
  backface-visibility:hidden;
}

/* ========== Cart (Birkin PNG) =========================================== */
.cart-fab{
  position:relative;
  display:inline-flex; align-items:center; justify-content:center;
  width:48px; height:48px;
  padding:0; border:0; background:transparent; cursor:pointer;
  transform:translateZ(0); z-index:20;
}
.cart-fab.bump{ animation:cart-bump 350ms ease; }
@keyframes cart-bump{
  0%{transform:translateZ(0) scale(1)}
  30%{transform:translateZ(0) scale(1.08)}
  100%{transform:translateZ(0) scale(1)}
}
.cart-img-wrap{ display:inline-block; width:100%; height:100%; aspect-ratio:1/1; line-height:0; }
.cart-img-wrap img{ width:100%; height:100%; object-fit:contain; pointer-events:none; }

/* Badge — hug the top-right corner of the bag (like iMessage) */
.cart-badge{
  position:absolute;
  top:0; right:0;
  transform: translate(35%, -35%);
  min-width:18px; height:18px; padding:0 5px;
  border-radius:999px; font-size:11px; line-height:18px; text-align:center;
  color:#000; background:var(--hover-green, #0bf05f);
  box-shadow:0 0 0 1px rgba(0,0,0,.25);
  pointer-events:none;
}

/* Cart alignment in header (height only; does NOT stretch siblings) */
:root[data-mode="shop"] header[role="banner"] .cart-fab{
  position:static !important; width:auto; height:var(--header-ctrl); padding:6px 8px;
  background:transparent !important; border:none !important; box-shadow:none !important;
  display:inline-grid; place-items:center; border-radius:0 !important;
}
:root[data-mode="shop"][data-theme="day"]   header[role="banner"] .cart-fab{ color:#111; }
:root[data-mode="shop"][data-theme="night"] header[role="banner"] .cart-fab{ color:#fff; }
:root[data-mode="shop"] header[role="banner"] .cart-fab:hover{ transform:translateY(-1px); }

/* ========== Grid & tiles ================================================= */
.shop-grid{
  --gap:28px;
  display:grid;
  grid-template-columns: repeat(var(--grid-cols, 5), minmax(0,1fr));
  gap:var(--gap);
}
@media (max-width:640px){
  .shop-grid{ --gap:20px; }
}

.product-tile{ display:block; color:inherit; text-decoration:none; }
.product-box{ aspect-ratio:1/1; display:flex; align-items:center; justify-content:center; overflow:hidden; background:transparent; border:none; }
.product-img{ width:88%; height:88%; object-fit:contain; }
.product-meta{ padding:10px 2px 0; letter-spacing:.02em; font-weight:800; text-align:center; font-size:clamp(12px,1.7vw,18px); line-height:1.05; }

/* ========== Product overlay ============================================= */
.product-hero-overlay{
  position:fixed; inset:0; z-index:90;
  background:var(--bg); color:var(--text);
  display:flex; align-items:center; justify-content:center; padding:20px;
}
.product-hero{
  width:min(92vw,1000px); max-height:86vh;
  display:flex; flex-direction:column; align-items:center; gap:14px; position:relative;
}
.product-hero-img{ width:100%; max-height:70vh; object-fit:contain; }
.product-hero-title{ font-weight:800; font-size:clamp(14px,2vw,20px); text-align:center; }
.product-hero-price{ font-weight:700; font-size:clamp(13px,1.8vw,18px); text-align:center; opacity:.9; }

/* HIDE the old back arrow – orb handles back */
.product-hero-close{ display:none !important; }

/* ===== Overlay vs Grid =================================================== */
:root[data-overlay-open] .shop-grid{ visibility:hidden; pointer-events:none; }

/* Cascade tiles pop */
.lb-tile{ filter:saturate(1.12) brightness(1.02); }
.lb-tile + .lb-tile{ box-shadow:-1px 0 0 rgba(255,255,255,.06) inset; }

/* ========== Day ↔ Night toggle (always-on glow) ========================== */
.lb-switch{
  position:relative; display:inline-flex; align-items:center;
  padding:0; margin:0; border:1px solid rgba(0,0,0,.14);
  background:#fff; cursor:pointer; isolation:isolate;
  box-shadow:0 4px 18px rgba(0,0,0,.10), inset 0 0 0 1px rgba(255,255,255,.6);
  transition:border-color .25s ease, background .25s ease, box-shadow .25s ease;
  -webkit-tap-highlight-color:transparent;
  outline:2px solid rgba(74,165,255,.9);
  outline-offset:3px;
}
.lb-switch:focus-visible{ outline-color:rgba(74,165,255,1); }

/* ========== Header orb / click-through ================================== */
[data-orb="density"]{
  padding:0 !important; margin:0 !important; border:0 !important;
  background:transparent !important; line-height:0 !important;
  border-radius:9999px; overflow:hidden; clip-path:circle(50% at 50% 50%);
}
[data-orb="density"], [data-orb="density"] *{ outline:0 !important; box-shadow:none !important; }
[data-orb="density"] canvas{ display:block; pointer-events:none; }

/* Visual ring to match the toggle halo */
.orb-ring{ outline:2px solid rgba(74,165,255,.9); outline-offset:3px; border-radius:9999px; }

/* Heavier token weights */
.code-keyword,.code-var,.code-string,.code-comment{ font-weight:800; }

/* === Header control helpers (no stretching) ============================== */
:root[data-mode="shop"] header[role="banner"] #lb-daynight{
  display:grid; place-items:center; padding:0 !important; margin:0 !important; line-height:0 !important;
}

/* ======================================================================== */
/* =========================  OVERRIDES (v4)  ============================== */
/* Kill the animated blue bubble glow everywhere */
.vscode-card{ box-shadow:none !important; border-color:rgba(255,255,255,.12) !important; }
.bubble-button:hover{ box-shadow:none !important; }
.bubble-glow-blue{ animation:none !important; }

/* Center “Florida, USA” even if container changes */
.florida-inline{
  display:block !important;
  text-align:center !important;
  margin-left:auto !important;
  margin-right:auto !important;
}

/* Keep the gate perfectly centered regardless of parent */
.page-center{ display:grid !important; place-items:center !important; }

/* Neon cascade glow helper (if used globally) */
.lb-cascade .lb-band{ position:relative; }
.lb-cascade .lb-band::after{ content:""; position:absolute; inset:-14px; background:var(--c); filter:blur(22px); opacity:.95; pointer-events:none; }

/* ===== Pills (single, de-duped) ========================================= */
.pill{
  display:inline-grid; place-items:center;
  height:28px; padding:0 10px; border-radius:9999px;
  font-weight:800; font-size:13px;
  border:1px solid rgba(0,0,0,.14);
  background:#fff; color:#111;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.6);
  transition: background .15s ease, color .15s ease, transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
:root[data-theme="night"] .pill{
  border-color: rgba(255,255,255,.18);
  background:#111; color:#fff;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

/* Size selected → quick green flash */
.size-pill.is-selected{ background:var(--hover-green); color:#000; border-color:rgba(0,0,0,.45); }
@keyframes flashGreen { 0%{filter:saturate(1)} 50%{filter:saturate(1.6)} 100%{filter:saturate(1)} }
.flash-green{ animation:flashGreen .26s ease; }

/* Plus pill state */
.plus-pill.is-active{ background:#d1d5db; color:#111; }            /* grey when showing sizes */
.plus-pill.is-ready { background:var(--hover-green); color:#000; } /* green when adding */

/* Cart green pulse */
@keyframes cartPulse { 0%{ box-shadow:0 0 0 0 rgba(11,240,95,.55) } 70%{ box-shadow:0 0 0 12px rgba(11,240,95,0) } 100%{ box-shadow:0 0 0 0 rgba(11,240,95,0) } }
.cart-fab.cart-pulse{ animation:cartPulse .42s ease; }
