@import "tailwindcss";

/* ========== Tokens ======================================================= */
:root{
  --mono: Menlo, Monaco, Consolas, "SFMono-Regular", "Liberation Mono", "Courier New", ui-monospace, monospace;

  /* app shell (dark by default) */
  --bg:#000; --panel:#1e1e1e; --text:#fff; --muted:#b3b3b3;

  /* accents */
  --accent:#1991ff; --focus-orange:#f7a02d;
  --hover-green:#0bf05f; --seafoam:#2ee6b8; --purple:#a855f7;

  /* code tokens */
  --comment:var(--seafoam); --string:#ce9178; --keyword:#9cdcfe;
  --var:#dcdcaa; --punct:#ffffff; --op:#ffffff;

  --radius-xl:14px;

  /* shop palette */
  --shop-offwhite:#F7F7F2;

  /* header controls (orb/toggle/cart) */
  --header-ctrl:56px;

  /* product grid columns (1..5) */
  --grid-cols:5;
}

/* Theme hint for native form controls */
:root[data-theme="day"]  { color-scheme: light; }
:root[data-theme="night"]{ color-scheme: dark;  }

/* ========== Base ========================================================= */
html,body{
  margin:0; padding:0;
  background:var(--bg); color:var(--text);
  font-family:var(--mono);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Prevent background scroll while a product overlay is open */
html[data-overlay-open]{ overflow:hidden; }

/* Motion safety */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms!important; animation-iteration-count:1!important; transition-duration:.001ms!important; scroll-behavior:auto!important; }
}

/* ========== Helpers ====================================================== */
.page-center{ min-height:100dvh; display:flex; align-items:center; justify-content:center; gap:18px; padding:2rem; }
.row-nowrap{ display:flex; align-items:center; gap:14px; flex-wrap:nowrap; }
.florida-inline{ display:block!important; text-align:center!important; margin-left:auto!important; margin-right:auto!important; }
.page-center{ display:grid!important; place-items:center!important; }

/* ========== Neon card (default ON – used by banned) ===================== */
.vscode-card{
  background:var(--panel);
  border:2px solid var(--accent);
  border-radius:var(--radius-xl);
  box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12);
  transition:transform .28s ease, box-shadow .28s ease, opacity .28s ease;
}
.card-ultra-tight{ padding:6px 8px; }
.login-card{ position:relative; display:inline-flex; flex-direction:column; gap:2px; width:fit-content; max-width:92vw; }

.bubble-button{ cursor:pointer; }
.bubble-button:hover{ box-shadow:0 0 0 1px rgba(25,145,255,.25), 0 0 24px rgba(25,145,255,.22), 0 0 50px rgba(25,145,255,.25); }
@keyframes bubblePulseBlue{
  0%{ box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12) }
  35%{ box-shadow:0 0 0 1px rgba(25,145,255,.25), 0 0 28px rgba(25,145,255,.28), 0 0 56px rgba(25,145,255,.32) }
  100%{ box-shadow:0 0 0 1px rgba(25,145,255,.15), 0 0 24px rgba(25,145,255,.12) }
}
.bubble-glow-blue{ animation:bubblePulseBlue .85s ease-out; }
.lameboy-glow{ color:var(--seafoam); font-weight:900; text-shadow:0 0 10px rgba(46,230,184,.50), 0 0 20px rgba(46,230,184,.35); }

/* Fixed-width ticker used in banned */
.ticker-viewport{ display:inline-block; vertical-align:bottom; width:min(32ch,72vw); overflow:hidden; white-space:nowrap; }
.ticker-track{ display:inline-block; padding-left:100%; will-change:transform; animation:lb-marquee 22s linear infinite; }
@keyframes lb-marquee{ 0%{transform:translate3d(0,0,0)} 100%{transform:translate3d(-100%,0,0)} }

/* 3D landing logo */
.logo-3d{ position:fixed; inset:0; z-index:8; pointer-events:none; }
@media (prefers-reduced-motion: reduce){ .logo-3d{ display:none } }
.login-card pre.code-tight{ letter-spacing:0; word-spacing:-0.14ch; }

/* Chakra cascade */
.chakra-overlay{ position:fixed; inset:0; z-index:60; display:grid; grid-template-columns:repeat(7,1fr); pointer-events:none; direction:rtl; }
.chakra-band{ position:relative; opacity:0; transform:translateX(2%); animation:chakraBlink 1.2s ease-out forwards; }
.chakra-band::before{ content:""; position:absolute; inset:-10px; background:var(--c); filter:blur(22px); opacity:.55; pointer-events:none; }
@keyframes chakraBlink{ 0%{opacity:0;transform:translateX(2%)} 18%{opacity:1;transform:translateX(0)} 80%{opacity:1} 100%{opacity:0} }
.band-1{animation-delay:0s} .band-2{animation-delay:.18s} .band-3{animation-delay:.36s}
.band-4{animation-delay:.54s} .band-5{animation-delay:.72s} .band-6{animation-delay:.90s} .band-7{animation-delay:1.08s}
.chakra-root{--c:#ff0808;background:#FF0000}
.chakra-sacral{--c:#ff8b07;background:#FF7F00}
.chakra-plexus{--c:#ffff4b;background:#FFFF00}
.chakra-heart{--c:#22ff22;background:#00FF00}
.chakra-throat{--c:#164bfb;background:#0000FF}
.chakra-thirdeye{--c:#b300ff;background:#4B0082}
.chakra-crown{--c:#faf5ff;background:#ff00c8}

/* ========== SHOP MODE ONLY (scope the “kill-glow” overrides here) ======= */
:root[data-mode="shop"][data-theme="day"]   { --bg:var(--shop-offwhite); --panel:var(--shop-offwhite); --text:#111; }
:root[data-mode="shop"][data-theme="night"] { --bg:#000;               --panel:#000;               --text:#fff; }

:root[data-mode="shop"]{
  background:var(--bg);
  color:var(--text);
  transition:background-color .35s ease, color .35s ease;
}

/* Header above overlays (actual positioning is in page.js) */
:root[data-mode="shop"] header[role="banner"]{
  z-index: 500 !important;
  background:transparent!important; box-shadow:none!important; border:0!important; padding:0 16px;
}
:root[data-mode="shop"] header[role="banner"] > *{ align-self:center!important; }

/* Remove stray whites */
:root[data-mode="shop"] .shop-page,
:root[data-mode="shop"] .shop-wrap,
:root[data-mode="shop"] .shop-grid,
:root[data-mode="shop"] .product-box,
:root[data-mode="shop"] .product-hero-overlay,
:root[data-mode="shop"] .product-hero,
:root[data-mode="shop"] .product-img,
:root[data-mode="shop"] [class*="page"],
:root[data-mode="shop"] [class*="container"]{ background:transparent!important; color:inherit; }

/* Product titles follow theme */
:root[data-mode="shop"] .product-meta{ color:var(--text); }

/* Hide landing logo only while the shop is mounted */
html:has([data-shop-root]) .logo-3d{ display:none!important; }

/* Shop-scoped: turn OFF the neon bubble so shop is clean */
:root[data-mode="shop"] .vscode-card{ box-shadow:none!important; border-color:rgba(255,255,255,.12)!important; }
:root[data-mode="shop"] .bubble-button:hover{ box-shadow:none!important; }
:root[data-mode="shop"] .bubble-glow-blue{ animation:none!important; }

/* ========== Cart (Birkin) =============================================== */
.cart-fab{
  position:relative; display:inline-flex; align-items:center; justify-content:center;
  width:48px; height:48px; padding:0; border:0; background:transparent; cursor:pointer;
  transform:translateZ(0); z-index:2;
}
.cart-fab.bump{ animation:cart-bump 350ms ease; }
@keyframes cart-bump{ 0%{transform:scale(1)} 30%{transform:scale(1.08)} 100%{transform:scale(1)} }
.cart-img-wrap{ display:inline-block; width:100%; height:100%; aspect-ratio:1/1; line-height:0; }
.cart-img-wrap img{ width:100%; height:100%; object-fit:contain; pointer-events:none; }
.cart-badge{
  position:absolute; top:0; right:0; transform:translate(35%, -35%);
  min-width:18px; height:18px; padding:0 5px; border-radius:999px; font-size:11px; line-height:18px; text-align:center;
  color:#000; background:var(--hover-green,#0bf05f); box-shadow:0 0 0 1px rgba(0,0,0,.25); pointer-events:none;
}
/* header alignment */
:root[data-mode="shop"] header[role="banner"] .cart-fab{
  position:static!important; width:auto; height:var(--header-ctrl); padding:6px 8px; display:inline-grid; place-items:center; border-radius:0!important;
}
:root[data-mode="shop"][data-theme="day"]   header[role="banner"] .cart-fab{ color:#111; }
:root[data-mode="shop"][data-theme="night"] header[role="banner"] .cart-fab{ color:#fff; }
:root[data-mode="shop"] header[role="banner"] .cart-fab:hover{ transform:translateY(-1px); }
@keyframes cartPulse{ 0%{box-shadow:0 0 0 0 rgba(11,240,95,.55)} 70%{box-shadow:0 0 0 12px rgba(11,240,95,0)} 100%{box-shadow:0 0 0 0 rgba(11,240,95,0)} }
.cart-fab.cart-pulse{ animation:cartPulse .42s ease; }

/* ========== Grid & tiles ================================================ */
.shop-grid{
  --gap:28px;
  display:grid;
  grid-template-columns: repeat(var(--grid-cols,5), minmax(0,1fr));
  gap:var(--gap);
}
@media (max-width:640px){ .shop-grid{ --gap:20px; } }

.product-tile{ display:block; color:inherit; text-decoration:none; }
.product-box{ aspect-ratio:1/1; display:flex; align-items:center; justify-content:center; overflow:hidden; background:transparent; border:none; }
.product-img{ width:88%; height:88%; object-fit:contain; }
.product-meta{ padding:10px 2px 0; letter-spacing:.02em; font-weight:800; text-align:center; font-size:clamp(12px,1.7vw,18px); line-height:1.05; }

/* ========== Product overlay ============================================= */
.product-hero-overlay{
  position:fixed; inset:0; z-index:420;  /* BELOW header(500), ABOVE grid */
  background:var(--bg); color:var(--text);
  display:flex; align-items:center; justify-content:center; padding:20px;
}
.product-hero{
  width:min(92vw,1000px); max-height:86vh;
  display:flex; flex-direction:column; align-items:center; gap:14px; position:relative;
}
.product-hero-img{ width:100%; max-height:70vh; object-fit:contain; }
.product-hero-title{ font-weight:800; font-size:clamp(14px,2vw,20px); text-align:center; }
.product-hero-price{ font-weight:700; font-size:clamp(13px,1.8vw,18px); text-align:center; opacity:.9; }
.product-hero-close{
  position:absolute; top:10px; right:10px; display:inline-grid!important; place-items:center;
  width:28px; height:28px; line-height:0; font-weight:900; font-size:16px; border-radius:9999px;
  border:1px solid rgba(0,0,0,.14); background:#fff; color:#111; box-shadow: inset 0 0 0 1px rgba(255,255,255,.6);
}

/* Hide clicks on grid while overlay open */
:root[data-overlay-open] .shop-grid{ visibility:hidden; pointer-events:none; }

/* ========== Day/Night switch ============================================ */
.lb-switch{
  position:relative; display:inline-flex; align-items:center;
  padding:0; margin:0; border:1px solid rgba(0,0,0,.14);
  background:#fff; cursor:pointer; isolation:isolate;
  box-shadow:0 4px 18px rgba(0,0,0,.10), inset 0 0 0 1px rgba(255,255,255,.6);
  transition:border-color .25s ease, background .25s ease, box-shadow .25s ease;
  -webkit-tap-highlight-color:transparent;
  outline:2px solid rgba(74,165,255,.9); outline-offset:3px;
}
.lb-switch:focus-visible{ outline-color:rgba(74,165,255,1); }

/* ========== ORB (always on top & interactive) =========================== */
:root[data-mode="shop"] header [data-orb="density"]{
  padding:0!important; margin:0!important; border:0!important; background:transparent!important; line-height:0!important;
  border-radius:9999px; overflow:hidden; clip-path:circle(50% at 50% 50%);
  position:relative; z-index: 600 !important; /* above overlay(420) & header */
}
[data-orb="density"], [data-orb="density"] *{ outline:0!important; box-shadow:none!important; }

/* ensure canvas is actually visible & clickable */
:root[data-mode="shop"] header [data-orb="density"] canvas{
  display:block !important;
  opacity:1 !important;
  visibility:visible !important;
  pointer-events:auto !important;
}

/* optional ring */
.orb-ring{ outline:2px solid rgba(74,165,255,.9); outline-offset:3px; border-radius:9999px; }

/* Code weight accents */
.code-keyword,.code-var,.code-string,.code-comment{ font-weight:800; }

/* === Gate: do not stretch the banned bubble; wrap text inside =========== */
:root[data-mode="gate"] .login-card{ max-width:min(92vw,720px)!important; }
:root[data-mode="gate"] .login-card pre,
:root[data-mode="gate"] .login-card code{
  white-space:pre-wrap!important; word-break:break-word!important; overflow-wrap:anywhere!important;
}

/* ===== Pills ============================================================= */
.pill{
  display:inline-grid; place-items:center;
  height:28px; padding:0 10px; border-radius:9999px; font-weight:800; font-size:13px;
  border:1px solid rgba(0,0,0,.14); background:#fff; color:#111;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.6);
  transition: background .15s ease, color .15s ease, transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
:root[data-theme="night"] .pill{ border-color:rgba(255,255,255,.18); background:#111; color:#fff; box-shadow:inset 0 0 0 1px rgba(255,255,255,.06); }
.size-pill.is-selected{ background:var(--hover-green); color:#000; border-color:rgba(0,0,0,.45); }
@keyframes flashGreen{ 0%{filter:saturate(1)} 50%{filter:saturate(1.6)} 100%{filter:saturate(1)} }
.flash-green{ animation:flashGreen .26s ease; }
.plus-pill.is-active{ background:#d1d5db; color:#111; }
.plus-pill.is-ready { background:var(--hover-green); color:#000; }
