// src/lib/products.js
// Single source of truth for the current hoodie set.
// All image paths are in /public/products (lowercase filenames).

/** @typedef {{ id:string, title:string, price:number, image:string, thumb?:string, images?:string[], sizes?:string[], category?:string }} Product */

/** @type {Product[]} */
export const PRODUCTS = [
  {
    id: 'hoodie-gray',
    title: 'Gray',
    price: 4000,
    category: 'hoodies',
    thumb: '/products/gray-thumb.webp',    // 41KB - loads instantly in grid
    image: '/products/gray.webp',           // 428KB - high-res for detail view
    images: ['/products/gray.webp'],
    sizes: ['S', 'M', 'L', 'XL'],
  },
  {
    id: 'hoodie-brown',
    title: 'Brown',
    price: 4000,
    category: 'hoodies',
    thumb: '/products/brown-thumb.webp',   // 19KB
    image: '/products/brown.webp',          // 144KB
    images: ['/products/brown.webp'],
    sizes: ['S', 'M', 'L', 'XL'],
  },
  {
    id: 'hoodie-black',
    title: 'Black',
    price: 4000,
    category: 'hoodies',
    thumb: '/products/black-thumb.webp',   // 21KB
    image: '/products/black.webp',          // 182KB
    images: ['/products/black.webp'],
    sizes: ['S', 'M', 'L', 'XL'],
  },
  {
    id: 'hoodie-green',
    title: 'Green',
    price: 4000,
    category: 'hoodies',
    thumb: '/products/green-thumb.webp',   // 21KB
    image: '/products/green.webp',          // 223KB
    images: ['/products/green.webp'],
    sizes: ['S', 'M', 'L', 'XL'],
  },
  {
    id: 'hoodie-blue',
    title: 'Blue',
    price: 4000,
    category: 'hoodies',
    thumb: '/products/blue-thumb.webp',    // 26KB
    image: '/products/blue.webp',           // 234KB
    images: ['/products/blue.webp'],
    sizes: ['S', 'M', 'L', 'XL'],
  },
]

// Default export so `import products from '@/lib/products'` works.
const products = PRODUCTS
export default products

/** Pre-computed category groups (never recompute client-side) */
const _categoryGroupsCache = new Map()
for (const p of PRODUCTS) {
  const cat = p.category || 'uncategorized'
  if (!_categoryGroupsCache.has(cat)) _categoryGroupsCache.set(cat, [])
  _categoryGroupsCache.get(cat).push(p)
}

/** @returns {Map<string, Product[]>} */
export function getCategoryGroups() {
  return _categoryGroupsCache
}

// REMOVED: logMissingAssets() - use build-time checks instead
// If you need to verify assets, run: node scripts/verify-assets.mjs
